<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rlefer">
<title>rlefer • rlefer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rlefer">
<meta property="og:description" content="rlefer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rlefer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/rlefer.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>rlefer</h1>
            
      
      
      <div class="d-none name"><code>rlefer.Rmd</code></div>
    </div>

    
    
<p><code>rlefer</code> is a R package that provides an interface to the
Jobard and Lefer (1997) algorithm implemented in C++. You can use this
algorithm to draw non-overlapping and evenly-spaced curves in a flow
field (or a “vector field” if you prefer to call it this way).</p>
<p>If you want deep details about how the algorithm works, there is a
scientific paper (Jobard and Lefer 1997) that describes it. But you
might find <a href="https://pedro-faria.netlify.app/posts/2024/2024-02-19-flow-even/en/index.html" class="external-link">this
article useful as well</a>.</p>
<div class="section level2">
<h2 id="a-first-example">A first example<a class="anchor" aria-label="anchor" href="#a-first-example"></a>
</h2>
<p>In order to draw any curve with <code>rlefer</code>, we first need to
generate a flow field. One important detail, this flow field needs to be
a square (width equal to height).</p>
<div class="section level3">
<h3 id="generating-a-flow-field">Generating a flow field<a class="anchor" aria-label="anchor" href="#generating-a-flow-field"></a>
</h3>
<p>As a first example, let’s draw evenly-spaced curves in a flow field
with 120x120 dimensions. We can generate such flow field with the
<code>ambient</code> R package like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ambient.data-imaginist.com" class="external-link">ambient</a></span><span class="op">)</span></span>
<span><span class="va">flow_field_width</span> <span class="op">&lt;-</span> <span class="fl">120</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">flow_field</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ambient.data-imaginist.com/reference/noise_perlin.html" class="external-link">noise_perlin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">flow_field_width</span>, <span class="va">flow_field_width</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To make the flow field stronger and more violent, I scale the values
in the flow field by multiplying them by <span class="math inline">\(2\pi\)</span>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow_field</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">flow_field</span></span></code></pre></div>
<p>We can visualize this flow field as a grid of angle values, like
this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.5</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2     </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span></span>
<span><span class="va">build_grid_df</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">angles</span>, <span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, each <span class="op">=</span> <span class="va">n</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, times <span class="op">=</span> <span class="va">n</span><span class="op">)</span>,</span>
<span>    value <span class="op">=</span> <span class="va">angles</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">visualize_grid</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">grid</span>, <span class="va">n</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># Calculate the n^2 lines</span></span>
<span>  <span class="va">grid</span> <span class="op">&lt;-</span> <span class="va">grid</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      line_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>      yend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Spread the lines across the grid</span></span>
<span>  <span class="va">grid</span> <span class="op">&lt;-</span> <span class="va">grid</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      xend <span class="op">=</span> <span class="va">xend</span> <span class="op">+</span> <span class="va">x</span>,</span>
<span>      yend <span class="op">=</span> <span class="va">yend</span> <span class="op">+</span> <span class="va">y</span></span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Plot these lines</span></span>
<span>  <span class="va">u</span> <span class="op">&lt;-</span> <span class="st">"inches"</span></span>
<span>  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="va">u</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>,</span>
<span>        xend <span class="op">=</span> <span class="va">xend</span>,yend <span class="op">=</span> <span class="va">yend</span>,</span>
<span>        group <span class="op">=</span> <span class="va">line_id</span></span>
<span>      <span class="op">)</span>,</span>
<span>      arrow <span class="op">=</span> <span class="va">a</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span></span>
<span>      xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="va">n</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="va">n</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">build_grid_df</span><span class="op">(</span><span class="va">flow_field</span>, <span class="va">flow_field_width</span><span class="op">)</span></span>
<span><span class="fu">visualize_grid</span><span class="op">(</span><span class="va">grid</span>, <span class="va">flow_field_width</span><span class="op">)</span></span></code></pre></div>
<p><img src="rlefer_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="how-curves-are-drawn-in-rlefer">How curves are drawn in <code>rlefer</code>?<a class="anchor" aria-label="anchor" href="#how-curves-are-drawn-in-rlefer"></a>
</h2>
<p>The functions from <code>rlefer</code> draws curves by walking
through the flow field. In other words, we start somewhere in the flow
field, and we start to walk by following the direction of the angle
values we encounter trough the flow field.</p>
<p>As we walk trough, we record the x and y coordinates of each step we
take, and, at the end of the process, we will have a sequence of points,
that we can connect to form a curve. So each curve drawn by
<code>rlefer</code> is essentially a sequence of points that we can
connect to visualize the curve they represent.</p>
<p>If we do that with <code>ggplot2</code> for example, we can use geoms
such as <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path()</a></code> or <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line()</a></code> to
visualize these curves.</p>
</div>
<div class="section level2">
<h2 id="drawing-evenly-spaced-curves-with-rlefer">Drawing evenly-spaced curves with <code>rlefer</code><a class="anchor" aria-label="anchor" href="#drawing-evenly-spaced-curves-with-rlefer"></a>
</h2>
<p>Now that we have our flow field prepared, we can start to draw curves
into this flow field.</p>
<p>Here, you want to decide if you want to draw curves that are not only
non-overlapping, but also, curves that are evenly-spaced between each
other.</p>
<p>If you want to avoid overlapping curves, and want to have full
control over the starting points of each curve, you should use the
<code><a href="../reference/non_overlapping_curves.html">rlefer::non_overlapping_curves()</a></code> function. This function
uses just the part of the Jobard and Lefer (1997) algorithm that is
responsible for the overlap checking to draw non-overlapping curves.</p>
<p>In contrast, if want to both avoid overlapping curves, and also want
your curves to be evenly-spaced between each other, the, you should use
the <code><a href="../reference/even_spaced_curves.html">rlefer::even_spaced_curves()</a></code> function, which takes full
advantage of the Jobard and Lefer (1997) algorithm to draw curves that
are both non-overlapping, and also, are evenly-spaced between each
other.</p>
<p>As our first example, let’s consider we want to draw both
non-overlapping and evenly-spaced curves. That is why we are going to
use the <code><a href="../reference/even_spaced_curves.html">rlefer::even_spaced_curves()</a></code> function.</p>
<p>To use this function we want to set some variables. First, we want to
decide the point where in the flow field we are going to start drawing
curves. This a single point, and going to be the starting point of the
first point drawn in the flow field.</p>
<p>So, if you ask the function to draw 100 curves, it will first draw a
single curve from the x and y coordinates you gave as the starting
point. And then, the function will start to draw the remaining 99
curves, by picking starting points that are <code>d_sep</code> of
distance from the curve. So all remaining curves are automatically
derived from this first curve drawn.</p>
<p>In our example, I will set the starting point to x = 45 and y = 24.
These numbers need to be inside the flow field bounds. So both
<code>x &lt; flow_field_width</code> and
<code>y &lt; flow_field_width</code> needs to be true.</p>
<p>Let’s start by drawing 100 curves. We will walk 40 steps
(<code>n_steps</code>) in each curve, and in each step, and we will walk
a distance of 1% of the flow field width (<code>step_length</code>) in
each step. If you raise the number of steps taken, the curves drawn will
be longer, otherwise, they will look shorter.</p>
<p>Also, if you raise the distance taken in each step, your curve will
be longer. But the curve you get as result, might be not very precise,
and will probably look a bit ugly. If you set this number too low, you
curve will look short even if the number of steps taken for each curve
are very high. So, be careful with this number, don’t set it to high or
too low. 1% of the flow field width is usually a good number.</p>
<p>Now, the distance between each curve (<code>d_sep</code>), which is
called as the “separating distance” here, will be <code>1.0</code>. The
algorithm will constantly check if each curve is at a minimum distance
of <code>d_sep</code> from each of it’s neighbors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rlefer</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_steps</span> <span class="op">&lt;-</span> <span class="fl">40</span></span>
<span><span class="va">n_curves</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="va">min_allowed_steps</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">step_length</span> <span class="op">&lt;-</span> <span class="fl">0.01</span> <span class="op">*</span> <span class="va">flow_field_width</span></span>
<span><span class="va">d_sep</span> <span class="op">&lt;-</span> <span class="fl">1.0</span></span>
<span></span>
<span><span class="co"># The coordinates x = 45 and y = 24 are used as the starting point:</span></span>
<span><span class="va">curves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/even_spaced_curves.html">even_spaced_curves</a></span><span class="op">(</span></span>
<span>  <span class="fl">45</span>, <span class="fl">24</span>,</span>
<span>  <span class="va">n_curves</span>,</span>
<span>  <span class="va">n_steps</span>,</span>
<span>  <span class="va">min_allowed_steps</span>,</span>
<span>  <span class="va">step_length</span>,</span>
<span>  <span class="va">d_sep</span>,</span>
<span>  <span class="va">flow_field</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">curves</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, group <span class="op">=</span> <span class="va">curve_id</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span></span>
<span>    xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">flow_field_width</span><span class="op">)</span>,</span>
<span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">flow_field_width</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="rlefer_files/figure-html/setup-1.png" width="700"></p>
<p>If we raise the number of steps, we will get longer curves, and the
spatial distribution of the curves might change also. Because with
longer curves, new spots, or new positions become available to the
algorithm as candidates for starting points of new curves.</p>
<p>Also, if we raise the number of curves, then, there will be more
curves obviously in the image, and, as a result, the image will look
more full.</p>
<p>For example, let’s raise the number of steps to 70, and the number of
curves to 300:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_curves</span> <span class="op">&lt;-</span> <span class="fl">300</span></span>
<span><span class="va">n_steps</span> <span class="op">&lt;-</span> <span class="fl">70</span></span>
<span></span>
<span><span class="va">curves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/even_spaced_curves.html">even_spaced_curves</a></span><span class="op">(</span></span>
<span>  <span class="fl">45</span>, <span class="fl">24</span>,</span>
<span>  <span class="va">n_curves</span>,</span>
<span>  <span class="va">n_steps</span>,</span>
<span>  <span class="va">min_allowed_steps</span>,</span>
<span>  <span class="va">step_length</span>,</span>
<span>  <span class="va">d_sep</span>,</span>
<span>  <span class="va">flow_field</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">curves</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, group <span class="op">=</span> <span class="va">curve_id</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span></span>
<span>    xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">flow_field_width</span><span class="op">)</span>,</span>
<span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">flow_field_width</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="rlefer_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>We can continue to increase the number of curves to fill more of the
image, until it gets completely filled with curves.</p>
</div>
<div class="section level2">
<h2 id="drawing-non-overlapping-curves">Drawing non-overlapping curves<a class="anchor" aria-label="anchor" href="#drawing-non-overlapping-curves"></a>
</h2>
<p>You might get frustrated with
<code>rlefer::even_spaced_curve()</code>, because it selects the
starting points for all derived curves automatically for you. And you
might want to have better control over where each curve starts.</p>
<p>If that is your case, then, you should use the
<code><a href="../reference/non_overlapping_curves.html">rlefer::non_overlapping_curves()</a></code> function instead. This
function accepts a list with starting points for each curve.</p>
<p>In other words, each element of this input list, is another list with
two named elements (<code>x</code> and <code>y</code>) that contains the
x and y coordinates of a starting point. The number of curves you want
to draw is automatically derived from the length of this input list.</p>
<p>So the function will draw a curve from each starting point described
in this list, and it will constantly check if each curve is overlapping
or not it’s neighbors curves.</p>
<p>In the example below, I am using <code><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif()</a></code> to randomly
select starting points across the flow field.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">80</span><span class="op">)</span></span>
<span><span class="va">xs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n_curves</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">90</span><span class="op">)</span></span>
<span><span class="va">ys</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n_curves</span><span class="op">)</span></span>
<span><span class="va">xs</span> <span class="op">&lt;-</span> <span class="va">xs</span> <span class="op">*</span> <span class="va">flow_field_width</span></span>
<span><span class="va">ys</span> <span class="op">&lt;-</span> <span class="va">ys</span> <span class="op">*</span> <span class="va">flow_field_width</span></span>
<span><span class="va">starting_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n_curves</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">starting_points</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">ys</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">curves</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/non_overlapping_curves.html">non_overlapping_curves</a></span><span class="op">(</span></span>
<span>  <span class="va">starting_points</span>,</span>
<span>  <span class="va">n_steps</span>,</span>
<span>  <span class="fl">5</span>,</span>
<span>  <span class="va">step_length</span>,</span>
<span>  <span class="va">d_sep</span>,</span>
<span>  <span class="va">flow_field</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">curves</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, group <span class="op">=</span> <span class="va">curve_id</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span></span>
<span>    xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">flow_field_width</span><span class="op">)</span>,</span>
<span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">flow_field_width</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="rlefer_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Jobard, Bruno, and Wilfrid Lefer. 1997. “Creating Evenly-Spaced
Streamlines of Arbitrary Density.” In Visualization in Scientific
Computing ’97, edited by Wilfrid Lefer and Michel Grave, 43–55. Vienna:
Springer Vienna.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pedro Duarte Faria.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
